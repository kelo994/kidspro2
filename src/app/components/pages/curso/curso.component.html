<a id="changeRoute" class="d-none" (click)="destruir()"> a</a>
<nz-layout class="left-layout">
    <nz-sider class="submenu-sidebar-asignatura mt-0" [nzWidth]="180">
        <nz-input-group [nzSuffix]="suffixIcon" class="p-0">
            <input type="text" class="p-0" nz-input placeholder="Buscar Asignatura" [(ngModel)]="searchValue" />
        </nz-input-group>
        <ng-template #suffixIcon>
            <i nz-icon nzType="search"></i>
        </ng-template>
        <ul nz-menu nzMode="inline" class="bd-top">
            <li class="item-submenu d-block my-auto" nz-menu-item nzMatchRouter
                *ngFor="let asign of asignaturas | filter:searchValue" (click)="openAsignatura(asign)">
                <p class="m-0">{{ asign.asignatura_nombre }}</p>
            </li>
            <li *ngIf="!asignaturas" class="py-2 bg-gray">
                <p class="m-0 py-2 text-center">No hay asignaturas que mostrar</p>
            </li>
        </ul>
    </nz-sider>
    <nz-layout class="right-layout">
        <div class="header bg-subheader p-3">
            <div class="row m-0">
                <div class="col-lg-8 col-md-8 col-xs-12">
                    <div class="row">
                        <div class="col">
                            <span class="text-subheader bd-invisible"><strong>{{ selectAsginatura }}</strong></span>
                            <span class="px-3">{{ cursoNombre }}</span>
                        </div>
                        <div class="col-6 text-left">
                            <select class="form-control w-50" (change)="onChangeSeccion($event.target.value)">
                                <option *ngFor="let s of secciones; let iSeccion = index" [value]="iSeccion">Sección {{ s.seccion_nombre }}
                                </option>
                                <option *ngIf="secciones?.length == 0">No hay secciones</option>
                            </select>
                        </div>
                       
                       
                    </div>
                </div>
                <div *ngIf="unidades?.length > 0" class="col-lg-4 col-md-4 col-xs-12 text-right">
                    <button class="btn btn-unidad mr-3" (click)="editarUnidades()">
                        <i class="fas fa-cog bd-invisible pr-1"></i>
                        <span class="pl-1" *ngIf="!editUnidades">Editar Unidades</span>
                        <span class="pl-1" *ngIf="editUnidades">Guardar Cambios</span>
                    </button>
                    <button class="btn btn-unidad mr-5" (click)="showModal()">
                        <i class="fas fa-qrcode bd-invisible"></i> Código de Acceso
                    </button>
                </div>
                <div class="col-12">
                    <span *ngIf="unidades?.length != 0">{{ unidades?.length }} Unidades</span>
                </div>
            </div>
        </div>
        <div class="unidades pt-5">
            <div *ngIf="unidades?.length > 0" cdkDropListGroup class="row m-0">
                <div *ngFor="let u of unidades; let i = index" class="col-lg-3 col-md-6 col-xs-12 mb-3">
                    <div class="card-content bg-gray p-0">
                        <p class="c-black py-1 pl-3 m-0 t-12">{{ u.grupo_nombre }}</p>
                        <div class="content-card-unidad bg-white">
                            <ul class="list-group px-0" *ngIf="u.bloques" cdkDropList [cdkDropListData]="u.bloques"
                                (cdkDropListDropped)="drop($event)">
                                <li *ngFor="let b of u.bloques; let j = index" class="list-group-item p-1" cdkDrag
                                    [cdkDragDisabled]="!editUnidades">
                                    <div class="row m-0">
                                        <div class="col px-0 pl-1 t-12">
                                            {{ b.bloque_titulo }}
                                        </div>
                                        <div class="col-2 p-0 d-block my-auto">
                                            <nz-switch disabled nzSize="small" [ngModel]="b.bloque_estado"></nz-switch>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="row m-0 p-2 footerUnity">
                                <div class="col text-center px-1">
                                    <button class="btn btn-unidad btn-sm w-100 t-12 py-2b"
                                        (click)="goToUnidad(u.grupo_id)">
                                        Entrar
                                    </button>
                                </div>
                                <div class="col text-center px-1">
                                    <button class="btn btn-out-unidad btn-sm w-100 t-12 py-2b">
                                        Eliminar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="flagUnidades != 1 && unidades?.length == 0" class="container">
                <div class="w80 row m-0 mx-auto justify-content-center">
                    <div class="col-4">
                        <div class="row m-0 mx-2">
                            <div class="col-2 px-0 text-right col-step">
                                <p id="firstStepSecciones" class="active">1</p>
                            </div>
                            <div class="col-10 card-content-steps col-step-content">
                                <p class="pl-4 desactive">Elige un Curso</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row m-0 mx-1">
                            <div class="col-2 px-0 text-right col-step">
                                <p id="secondStepSecciones" class="desactive">2</p>
                            </div>
                            <div class="col-10 card-content-steps col-step-content">
                                <p class="pl-4 desactive">Elige una Asignatura</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row m-0 mx-1">
                            <div class="col-2 px-0 text-right col-step">
                                <p id="secondStep" class="desactive">3</p>
                            </div>
                            <div class="col-10 card-content-steps col-step-content">
                                <p class="pl-4 desactive">Administre las unidades</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 row mt-4 p-0">
                        <div class="col p-0" style="left: -4%; width: 4%;">
                            <div class="point-blue ml-auto"></div>
                        </div>
                        <div class="col-12 d-block my-auto p-0" style="left: -5%;min-width: 100%;">
                            <div class="progress">
                                <div id="progressBar" class="progress-bar" role="progressbar" aria-valuenow="12"
                                    aria-valuemin="12" style="width: 12%" aria-valuemax="100">
                                </div>
                            </div>
                        </div>
                        <div class="col p-0" style="left: -74%;max-width: 4%;">
                            <div id="pointTwo" class="point-blue mr-auto"></div>
                        </div>
                        <div class="col p-0" style="left: -43%;">
                            <div class="point-blank mr-auto"></div>
                        </div>
                    </div>
                </div>
            </div>

            <nz-alert *ngIf="flagUnidades == 1" nzType="warning" nzMessage="Curso"
                nzDescription="El funcionario no cuenta con cursos asociados">
            </nz-alert>
        </div>
    </nz-layout>
</nz-layout>

<nz-modal [(nzVisible)]="modalGetCode" nzTitle="Código de Acceso" (nzOnOk)="handleOk()">
    <div class="card c-code p-3">
        <p class="c-blue m-0">
            {{ codigo }}
        </p>
    </div>
</nz-modal>